navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){const o=e.coords.latitude,r=e.coords.longitude,t=L.map("mapa").setView([o,r],16);let a;const n=L.esri.Geocoding.geocodeService();L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t),a=new L.marker([o,r],{draggable:!0,autoPan:!0}).addTo(t),a.on("moveend",(function(e){a=e.target;const o=a.getLatLng();t.panTo(new L.LatLng(o.lat,o.lng)),n.reverse().latlng(o,13).run((function(e,o){a.bindPopup(o.address.LongLabel),document.querySelector(".street").textContent=o?.address?.Address??"",document.querySelector("#street").value=o?.address?.Address??"",document.querySelector("#lat").value=o?.latlng?.lat??"",document.querySelector("#lng").value=o?.latlng?.lng??""}))}))}),(function(e){switch(e.code){case e.PERMISSION_DENIED:console.error("Permiso denegado para obtener la ubicación.");break;case e.POSITION_UNAVAILABLE:console.error("La información de ubicación no está disponible.");break;case e.TIMEOUT:console.error("La solicitud para obtener la ubicación ha caducado.");break;case e.UNKNOWN_ERROR:console.error("Ha ocurrido un error desconocido.")}})):console.error("Geolocalización no es soportada por este navegador.");